<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜¿æ¬£ç¾ç¾o(*////â–½////*)q</title>
    <link rel="preload" href="bg.jpg" as="image">
    <link rel="preload" href="bgmusic.mp3" as="audio">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: url('bg.jpg') center/cover no-repeat fixed, linear-gradient(135deg, #ffeef5 0%, #ffb3d9 100%);
            overflow-x: hidden;
        }

        .hearts-container, .love-rain, .ribbons, .bubbles, .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .heart, .love-drop, .ribbon, .bubble, .star {
            position: absolute;
        }

        .heart {
            color: #ff69b4;
            animation: heartFloat 8s infinite linear;
            opacity: 0.8;
        }

        @keyframes heartFloat {
            0% { transform: translateY(100vh) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg) scale(1.2); opacity: 0; }
        }

        .love-drop {
            font-size: 24px;
            color: #ff69b4;
            animation: loveRain 6s linear infinite;
        }

        @keyframes loveRain {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .ribbon {
            width: 6px;
            height: 80px;
            animation: ribbonFall 5s linear infinite;
        }

        @keyframes ribbonFall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        .bubble {
            background: radial-gradient(circle, rgba(255, 182, 193, 0.6), rgba(255, 105, 180, 0.3));
            border-radius: 50%;
            animation: bubbleFloat 8s infinite linear;
        }

        @keyframes bubbleFloat {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-100px) scale(1.5); opacity: 0; }
        }

        .star {
            color: #ffd700;
            font-size: 16px;
            animation: starTwinkle 3s ease-in-out infinite;
        }

        @keyframes starTwinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .balloons {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            animation: balloonFloat 4s ease-in-out infinite;
        }

        .balloon {
            display: inline-block;
            margin: 0 5px;
            font-size: 30px;
            animation: balloonBounce 2s ease-in-out infinite;
        }

        .balloon:nth-child(1) { animation-delay: 0s; }
        .balloon:nth-child(2) { animation-delay: 0.2s; }
        .balloon:nth-child(3) { animation-delay: 0.4s; }
        .balloon:nth-child(4) { animation-delay: 0.6s; }
        .balloon:nth-child(5) { animation-delay: 0.8s; }

        @keyframes balloonFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes balloonBounce {
            0%, 100% { transform: scale(1) rotate(-2deg); }
            50% { transform: scale(1.1) rotate(2deg); }
        }

        .balloons-right {
            position: fixed;
            top: 20px;
            right: 100px;
            z-index: 100;
            animation: balloonFloat 3s ease-in-out infinite reverse;
        }

        .container {
            position: relative;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            z-index: 2;
        }

        .envelope-container {
            perspective: 1000px;
            width: 420px;
            height: 320px;
            margin: 0 auto;
            position: relative;
        }

        .envelope {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: all 1s ease;
        }

        .envelope.opened .envelope-top {
            transform: rotateX(-180deg);
        }

        .envelope-body {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffeef5 0%, #ffe0eb 50%, #ffd6e8 100%);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.2);
            border: 3px solid #ffb3d9;
        }

        .envelope-top {
            position: absolute;
            width: 100%;
            height: 50%;
            background: linear-gradient(135deg, #ffb3d9 0%, #ff80bf 50%, #ff4da6 100%);
            border-radius: 12px 12px 0 0;
            transform-origin: bottom;
            transition: all 1s ease;
            z-index: 10;
            border: 3px solid #ff69b4;
            border-bottom: none;
        }

        .envelope-top::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 210px solid transparent;
            border-right: 210px solid transparent;
            border-top: 100px solid #ff4da6;
        }

        .envelope-decoration {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 30px;
            z-index: 15;
            animation: decorationPulse 2s ease-in-out infinite;
        }

        @keyframes decorationPulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.2); }
        }

        .letter {
            position: absolute;
            width: 90%;
            height: 85%;
            background: linear-gradient(145deg, #fffbfc 0%, #fff5f8 100%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translateY(20px);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 8px 30px rgba(255, 105, 180, 0.2);
            opacity: 0;
            transition: all 1s ease;
            z-index: 5;
            border: 2px solid #ffe0eb;
        }

        .envelope.opened .letter {
            opacity: 1;
            transform: translate(-50%, -50%) translateY(0);
        }

        .letter-content {
            height: 100%;
            overflow-y: auto;
            color: #8b4a6b;
            line-height: 1.8;
            font-size: 16px;
        }

        .letter-title {
            text-align: center;
            font-size: 26px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff69b4, #ff1493, #dc143c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(255, 105, 180, 0.3);
        }

        .letter-text {
            margin-bottom: 15px;
            text-indent: 2em;
            background: rgba(255, 240, 245, 0.8);
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #ff69b4;
            box-shadow: 0 2px 8px rgba(255, 105, 180, 0.1);
        }

        .signature {
            text-align: right;
            margin-top: 30px;
            font-style: italic;
            color: #ff1493;
            font-weight: bold;
            background: rgba(255, 182, 193, 0.2);
            padding: 10px;
            border-radius: 8px;
        }

        .open-btn {
            position tar: absolute;
            bottom: -80px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #ff69b4, #ff1493, #dc143c);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.4);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .open-btn:hover {
            transform: translateX(-50%) translateY(-5px) scale(1.1);
            box-shadow: 0 12px 30px rgba(255, 20, 147, 0.6);
        }

        .music-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #ff69b4, #ff1493);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 20, 147, 0.4);
            z-index: 1000;
        }

        .music-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 7px 20px rgba(255, 20, 147, 0.6);
        }

        .birthday-title {
            position: absolute;
            top: -120px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 48px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff69b4, #ff1493, #dc143c, #ffd700);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease-in-out infinite;
            text-shadow: 0 4px 8px rgba(255, 105, 180, 0.3);
            z-index: 100;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .date-decoration {
            position: absolute;
            bottom: -150px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: #fff;
            background: linear-gradient(145deg, #ff69b4, #ff1493);
            padding: 12px 25px;
            border-radius: 30px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.4);
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffeef5 0%, #ffb3d9 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }

        .loading-content { text-align: center; color: #ff1493; }
        .loading-text { font-size: 24px; font-weight: bold; animation: pulse 2s infinite; margin-bottom: 20px; }
        .loading-hearts { font-size: 30px; animation: heartBeat 1.5s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        @keyframes heartBeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }
        .loading.hidden { opacity: 0; pointer-events: none; }

        @media (max-width: 768px) {
            .envelope-container { width: 320px; height: 240px; }
            .birthday-title { font-size: 32px; top: -100px; }
            .letter { padding: 20px; }
            .letter-content { font-size: 14px; }
            .balloons, .balloons-right { font-size: 20px; }
        }

        /* --- æ•°ç å€’è®¡æ—¶å’Œæ˜Ÿç©ºåŠ¨ç”»æ ·å¼ --- */
        @font-face {
            font-family: 'Digital';
            src: local('Consolas'), local('Monospace'); 
        }

        #countdown-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* === [ULTIMATE] é“¶æ²³é—ªçƒ + æ˜Ÿäº‘ + æµåŠ¨ + æ’æ˜Ÿç¾¤ === */
            background:
                /* é“¶æ²³è‡‚æµåŠ¨ */
                radial-gradient(ellipse 70% 45% at 25% 75%, rgba(138, 43, 226, 0.7) 0%, rgba(75, 0, 130, 0.4) 50%, transparent 100%),
                radial-gradient(ellipse 60% 35% at 75% 25%, rgba(147, 112, 219, 0.6) 0%, rgba(106, 90, 205, 0.3) 50%, transparent 100%),
                /* æ˜Ÿäº‘é›¾æ°” */
                radial-gradient(circle at 45% 55%, rgba(255, 255, 255, 0.12) 0%, transparent 60%),
                radial-gradient(circle at 60% 40%, rgba(255, 182, 193, 0.08) 0%, transparent 70%),
                /* æ·±ç©ºåŸºç¡€ */
                radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
            color: #ff69b4;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 20000;
            transition: opacity 1s ease-out;
            padding: 20px; 
            overflow: hidden;
            /* é“¶æ²³æµåŠ¨ + é—ªçƒåŠ¨ç”» */
            animation: galaxyFlow 25s linear infinite, galaxyTwinkle 4s ease-in-out infinite;
        }

        @keyframes galaxyFlow {
            0% { background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%; }
            100% { background-position: 100% 100%, 100% -100%, 100% 100%, -100% 100%, 0% 0%; }
        }

        @keyframes galaxyTwinkle {
            0%, 100% { opacity: 0.95; }
            50% { opacity: 1; }
        }

        /* èƒŒæ™¯æ’æ˜Ÿé—ªçƒå±‚ï¼ˆCSSç”Ÿæˆï¼‰ */
        #countdown-wrapper::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: 
                radial-gradient(1px 1px at 8% 12%, #fff 100%, transparent 0),
                radial-gradient(1px 1px at 15% 78%, #ffd700 100%, transparent 0),
                radial-gradient(2px 2px at 48% 22%, #fff 100%, transparent 0),
                radial-gradient(1px 1px at 82% 58%, #ff69b4 100%, transparent 0),
                radial-gradient(1px 1px at 92% 88%, #ffd700 100%, transparent 0),
                radial-gradient(1px 1px at 35% 42%, #fff 100%, transparent 0),
                radial-gradient(1px 1px at 65% 72%, #ff69b4 100%, transparent 0),
                radial-gradient(1px 1px at 20% 30%, #ffd700 100%, transparent 0),
                radial-gradient(2px 2px at 55% 85%, #fff 100%, transparent 0),
                radial-gradient(1px 1px at 70% 15%, #ff69b4 100%, transparent 0);
            animation: starsFlicker 3s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes starsFlicker {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        #countdown-wrapper.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .countdown-title {
            font-size: 36px;
            font-weight: bold;
            color: #ffb3d9;
            margin-bottom: 30px;
            letter-spacing: 2px;
            text-shadow: 0 0 15px rgba(255, 179, 217, 0.7);
            z-index: 2;
        }

        .countdown-note {
            font-size: 20px;
            color: #fff;
            margin-top: 20px;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
            z-index: 2;
        }

        .countdown-display {
            font-family: 'Digital', 'Consolas', monospace;
            font-size: clamp(32px, 10vw, 60px);
            display: flex;
            gap: 15px;
            padding: 20px;
            border: 3px solid #ff69b4;
            border-radius: 10px;
            background-color: rgba(255, 105, 180, 0.1);
            box-shadow: 0 0 25px rgba(255, 105, 180, 0.6);
            z-index: 2;
        }

        .time-group {
            text-align: center;
            line-height: 1;
        }

        .time-value {
            color: #ffd700;
            padding: 0 5px;
            text-shadow: 0 0 8px #ffd700, 0 0 15px #ff69b4;
        }

        .time-label {
            font-size: clamp(12px, 3vw, 16px);
            color: #ff69b4;
            display: block;
            margin-top: 5px;
        }

        /* === [ULTIMATE] æ˜Ÿåº§ + åŠ¨æ€è¿çº¿ + èƒ½é‡è„‰å†² === */
        #star-animation-container {
            width: 100%;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        #stars-row {
            position: relative;
            width: 90%;
            max-width: 500px;
            height: 300px;
            margin: 20px auto 0;
            overflow: visible;
        }

        .animated-css-star {
            width: 25px;
            height: 25px;
            position: absolute;
            opacity: 0;
            transform: scale(0.3);
            background: #ffd700;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            filter: blur(1.5px);
            transition: all 1s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .animated-css-star.star-lit {
            opacity: 1;
            transform: scale(1.3) rotate(180deg);
            filter: blur(0);
            animation: starPulse 2.5s infinite alternate ease-in-out;
        }

        .animated-css-star.star-lit::before,
        .animated-css-star.star-lit::after {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.9), transparent);
        }

        .animated-css-star.star-lit::before {
            width: 45px; height: 45px;
            animation: glowExpand 2s infinite ease-out;
        }

        .animated-css-star.star-lit::after {
            width: 70px; height: 70px;
            opacity: 0.4;
            animation: glowExpand 2s infinite ease-out 0.6s;
        }

        @keyframes starPulse {
            0% { transform: scale(1.1) rotate(180deg); filter: drop-shadow(0 0 6px #ffd700) brightness(1); }
            100% { transform: scale(1.4) rotate(200deg); filter: drop-shadow(0 0 18px #ff69b4) brightness(1.8); }
        }

        @keyframes glowExpand {
            0% { transform: translate(-50%, -50%) scale(0.6); opacity: 0.8; }
            70% { transform: translate(-50%, -50%) scale(1.4); opacity: 0.3; }
            100% { transform: translate(-50%, -50%) scale(1.8); opacity: 0; }
        }

        /* === åŠ¨æ€è¿çº¿ SVG å®¹å™¨ === */
        #constellation-lines {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .constellation-line {
            stroke: rgba(255, 215, 0, 0.3);
            stroke-width: 1.5;
            fill: none;
            opacity: 0;
            transition: opacity 0.8s ease, stroke 0.5s ease;
        }

        .constellation-line.active {
            opacity: 1;
            stroke: #ffd700;
            filter: drop-shadow(0 0 4px #ffd700);
            animation: linePulse 2s infinite ease-in-out;
        }

        @keyframes linePulse {
            0%, 100% { stroke: #ffd700; stroke-width: 1.5; }
            50% { stroke: #ff69b4; stroke-width: 2; }
        }

        #star-status {
            font-size: 24px;
            color: #98fb98;
            margin-bottom: 10px;
            text-shadow: 0 0 12px rgba(152, 251, 152, 0.7);
            z-index: 2;
        }

        /* æ˜Ÿåº§åæ ‡ï¼ˆ20é¢—ï¼‰ */
        .animated-css-star:nth-child(1) { top: 10%; left: 15%; }
        .animated-css-star:nth-child(2) { top: 20%; left: 30%; }
        .animated-css-star:nth-child(3) { top: 15%; left: 50%; }
        .animated-css-star:nth-child(4) { top: 5%; left: 70%; }
        .animated-css-star:nth-child(5) { top: 25%; left: 85%; }
        .animated-css-star:nth-child(6) { top: 40%; left: 75%; }
        .animated-css-star:nth-child(7) { top: 35%; left: 55%; }
        .animated-css-star:nth-child(8) { top: 45%; left: 40%; }
        .animated-css-star:nth-child(9) { top: 30%; left: 20%; }
        .animated-css-star:nth-child(10) { top: 50%; left: 5%; }
        .animated-css-star:nth-child(11) { top: 65%; left: 18%; }
        .animated-css-star:nth-child(12) { top: 55%; left: 30%; }
        .animated-css-star:nth-child(13) { top: 70%; left: 45%; }
        .animated-css-star:nth-child(14) { top: 60%; left: 60%; }
        .animated-css-star:nth-child(15) { top: 75%; left: 75%; }
        .animated-css-star:nth-child(16) { top: 65%; left: 90%; }
        .animated-css-star:nth-child(17) { top: 85%; left: 80%; }
        .animated-css-star:nth-child(18) { top: 90%; left: 60%; }
        .animated-css-star:nth-child(19) { top: 80%; left: 35%; }
        .animated-css-star:nth-child(20) { top: 95%; left: 10%; }

        #mainContent {
            display: none;
        }
    </style>
</head>
<body>
    <div id="countdown-wrapper">
        <div class="countdown-title">æƒŠå–œå¯åŠ¨ä¸­...</div>
        <div id="countdown-display"></div>
        <div class="countdown-note">å¯åŠ¨æˆåŠŸ</div>
        <div id="star-animation-container" style="display: none; margin-top: 30px;">
            <div id="star-status">è¿™æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„æ—¥å­</div>
            <div id="stars-row">
                <svg id="constellation-lines"></svg>
            </div>
        </div>
    </div>
    
    <div id="mainContent" style="display: none;">
        <!-- åŸæœ‰ä¸»å†…å®¹ä¿æŒä¸å˜ -->
        <div class="loading" id="loading">
            <div class="loading-content">
                <div class="loading-text">éƒ½æ˜¯æˆ‘ç²¾æŒ‘ç»†é€‰çš„ï¼Œä½ è‚¯å®šçˆ±çœ‹ï¼Œä¸è¦å¤–æ”¾å“¦</div>
                <div class="loading-hearts"></div>
            </div>
        </div>

        <div class="hearts-container" id="heartsContainer"></div>
        <div class="love-rain" id="loveRain"></div>
        <div class="ribbons" id="ribbons"></div>
        <div class="bubbles" id="bubbles"></div>
        <div class="stars" id="stars"></div>

        <div class="balloons">
            <span class="balloon">ğŸˆ</span><span class="balloon">ğŸ€</span><span class="balloon">ğŸˆ</span><span class="balloon">ğŸŒˆ</span><span class="balloon">ğŸˆ</span>
        </div>

        <div class="balloons balloons-right">
            <span class="balloon">ğŸ’•</span><span class="balloon">ğŸˆ</span><span class="balloon">ğŸ’–</span><span class="balloon">ğŸˆ</span>
        </div>

        <div class="container">
            <div class="envelope-container">
                <div class="birthday-title">å˜» å˜»ï¼ˆåç¬‘ï¼‰</div>
                <div class="envelope" id="envelope">
                    <div class="envelope-decoration">ğŸ«¶</div>
                    <div class="envelope-body"></div>
                    <div class="envelope-top"></div>
                    <div class="letter">
                        <div class="letter-content">
                            <div class="letter-title">ğŸŒš è‡´â€”â€”å”æ¬£ ğŸŒš</div>
                            <div class="letter-text">
                                <!-- ä¿¡ä»¶å†…å®¹ä¿æŒä¸å˜ -->
                                <div style="font-family:'KaiTi','æ¥·ä½“',serif; font-size:20px; color:#4a2b18; line-height:1.9; white-space:pre-wrap;">
                                    <!-- åŸä¿¡ä»¶å†…å®¹ -->
                                    è¦ªæ„›çš„é˜¿æ¬£ï¼š<br><br>å—¨ï½åˆæ˜¯ä¸€å¹´10æœˆ21æ—¥äº†ï¼Œä»Šå¤©ï¼Œæ˜¯å±¬æ–¼å¦³çš„ç‰¹åˆ¥æ—¥å­ã€‚<br>å…ˆè·Ÿå¦³èªªè²æœ€é‡è¦çš„ï¼šç”Ÿæ—¥å¿«æ¨‚ğŸ‚ï¼<br>...ï¼ˆå…¶ä½™å†…å®¹ä¸å˜ï¼‰
                                </div>
                            </div>
                            <div class="signature">
                                ğŸ’– çˆ±ä½ çš„å­æ€¡<br>ğŸŒ¹ 2025å¹´12æœˆ10æ—¥ ğŸŒ¹
                            </div>
                        </div>
                    </div>
                </div>
                <button class="open-btn" id="openBtn">å¿«æ‰£æˆ‘æ˜¯ä½ å–œæ¬¢çœ‹çš„</button>
                <div class="date-decoration">ä»Šå¤©æ˜¯ä¸ªå¥½æ—¥å­ï¼Œæˆ‘æ±ºå®šå¸¦ä½ ä¸€èµ·çœ‹</div>
            </div>
        </div>
        <button class="music-btn" id="musicBtn">ç‚¹æˆ‘æ‰“å¼€å£°éŸ³</button>
    </div>
    <audio id="bgMusic" src="bgmusic.mp3" loop preload="auto"></audio>

    <script>
        (function() {
            const uuidRequired = '74520';
            const now = new Date();
            const target = new Date('2025-12-10T00:00:00+08:00'); 
            const urlParams = new URLSearchParams(window.location.search);
            const uuid = urlParams.get('uuid');
            
            const countdownWrapper = document.getElementById('countdown-wrapper');
            const countdownDisplay = document.getElementById('countdown-display');
            const mainContent = document.getElementById('mainContent');
            const starContainer = document.getElementById('star-animation-container');
            const starsRow = document.getElementById('stars-row');
            const starStatus = document.getElementById('star-status');
            const linesSVG = document.getElementById('constellation-lines');

            const isValidAccess = uuid === uuidRequired || now.getTime() >= target.getTime();
            let countdownInterval = null;
            const totalStars = 20;

            // æ˜Ÿåº§è¿çº¿å®šä¹‰ï¼ˆæ¨¡æ‹Ÿä¸€ä¸ªå¿ƒå½¢ + æ˜Ÿï¼‰
            const connections = [
                [0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 6], [6, 7], [7, 8], [8, 9], [9, 0],
                [10, 11], [11, 12], [12, 13], [13, 14], [14, 15], [15, 16], [16, 17], [17, 18], [18, 19], [19, 10],
                [2, 12], [7, 13], [4, 15]
            ];

            if (!isValidAccess) {
                countdownWrapper.style.display = 'flex';
                countdownWrapper.innerHTML = `<div style="text-align:center;font-size:20px;color:#ff69b4;padding:20px;">æŠ±æ­‰ï¼ŒæƒŠå–œåªå¯åœ¨ <b>2025.12.10</b> é¢†å–ï¼Œç›®å‰ä»…é™æŒ‡å®šè®¿å®¢æŸ¥çœ‹<br><br>è¯·ç¨åå†æ¥æˆ–ä½¿ç”¨ä¸“å±é“¾æ¥å“¦ï½</div>`;
                return;
            }

            const remaining = target.getTime() - now.getTime();
            
            if (remaining > 0 && uuid !== uuidRequired) {
                // å€’è®¡æ—¶é€»è¾‘ä¿æŒä¸å˜
                function formatTimeGroup(value, label) {
                    return `<div class="time-group"><span class="time-value">${String(value).padStart(2, '0')}</span><span class="time-label">${label}</span></div>`;
                }
                function updateCountdown() {
                    const currentRemaining = target.getTime() - new Date().getTime();
                    if (currentRemaining <= 0) {
                        clearInterval(countdownInterval);
                        startStarAnimation();
                        return;
                    }
                    const days = Math.floor(currentRemaining / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((currentRemaining / (1000 * 60 * 60)) % 24);
                    const minutes = Math.floor((currentRemaining / (1000 * 60)) % 60);
                    const seconds = Math.floor(Math.max(0, currentRemaining / 1000) % 60);
                    countdownDisplay.innerHTML = 
                        formatTimeGroup(days, 'å¤©') + 
                        formatTimeGroup(hours, 'å°æ™‚') + 
                        formatTimeGroup(minutes, 'åˆ†') + 
                        formatTimeGroup(seconds, 'ç§’');
                }
                countdownInterval = setInterval(updateCountdown, 1000);
                updateCountdown();
                return;
            }

            countdownWrapper.style.display = 'flex';
            startStarAnimation();

            function createStarsForAnimation() {
                for (let i = 0; i < totalStars; i++) {
                    const star = document.createElement('div');
                    star.className = 'animated-css-star';
                    star.dataset.index = i;
                    starsRow.appendChild(star);
                }
            }

            function createConstellationLines() {
                const stars = starsRow.querySelectorAll('.animated-css-star');
                connections.forEach(([i, j]) => {
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.classList.add('constellation-line');
                    line.dataset.from = i;
                    line.dataset.to = j;
                    linesSVG.appendChild(line);
                });
            }

            function updateLines() {
                const stars = starsRow.querySelectorAll('.animated-css-star');
                const rect = starsRow.getBoundingClientRect();
                document.querySelectorAll('.constellation-line').forEach(line => {
                    const i = parseInt(line.dataset.from);
                    const j = parseInt(line.dataset.to);
                    const s1 = stars[i].getBoundingClientRect();
                    const s2 = stars[j].getBoundingClientRect();
                    const x1 = s1.left - rect.left + s1.width / 2;
                    const y1 = s1.top - rect.top + s1.height / 2;
                    const x2 = s2.left - rect.left + s2.width / 2;
                    const y2 = s2.top - rect.top + s2.height / 2;
                    line.setAttribute('x1', x1);
                    line.setAttribute('y1', y1);
                    line.setAttribute('x2', x2);
                    line.setAttribute('y2', y2);
                });
            }

            function startStarAnimation() {
                countdownDisplay.style.display = 'none';
                document.querySelector('.countdown-title').textContent = 'æƒŠå–œå¯åŠ¨ä¸­...';
                document.querySelector('.countdown-note').style.display = 'none';
                starContainer.style.display = 'block';
                
                createStarsForAnimation();
                createConstellationLines();
                
                const stars = starsRow.querySelectorAll('.animated-css-star');
                let litCount = 0;

                function lightUpStar() {
                    if (litCount < totalStars) {
                        const delay = 180 + (litCount * 35);
                        setTimeout(() => {
                            stars[litCount].classList.add('star-lit');
                            updateLines();
                            // æ¿€æ´»ç›¸å…³è¿çº¿
                            document.querySelectorAll(`[data-from="${litCount}"], [data-to="${litCount}"]`).forEach(l => {
                                if ([...l.classList].includes('active') || 
                                    (l.dataset.from < litCount && l.dataset.to <= litCount) ||
                                    (l.dataset.to < litCount && l.dataset.from <= litCount)) {
                                    l.classList.add('active');
                                }
                            });
                            starStatus.textContent = `æ­£åœ¨ç‚¹äº®ç¬¬ ${litCount + 1} é¢—æ˜Ÿ... âœ¨`;
                            litCount++;
                            lightUpStar();
                        }, delay);
                    } else {
                        starStatus.textContent = `å®~æ˜Ÿåº§å®Œæˆï¼Œå¯åŠ¨æˆåŠŸ...`;
                        setTimeout(() => {
                            document.querySelectorAll('.constellation-line').forEach(l => l.classList.add('active'));
                        }, 300);
                        setTimeout(transitionToMainContent, 2500);
                    }
                }

                lightUpStar();
            }
            
            function transitionToMainContent() {
                countdownWrapper.classList.add('hidden');
                mainContent.style.display = 'block';
                initializePage();
                setTimeout(() => {
                    if (countdownWrapper.parentNode) {
                        countdownWrapper.parentNode.removeChild(countdownWrapper);
                    }
                }, 1000);
            }

            function initializePage() {
                setTimeout(() => {
                    document.getElementById('loading').classList.add('hidden');
                }, 2500);
                // å…¶ä½™åˆå§‹åŒ–å‡½æ•°ä¿æŒä¸å˜
                createHearts(); createLoveRain(); createRibbons(); createBubbles(); createStars();
                initEnvelopeInteraction(); initMusicControl();
            }

            // å…¶ä½™å‡½æ•°ï¼ˆcreateHearts, etc.ï¼‰ä¿æŒåŸæ ·
            function createHearts() {
                const heartsContainer = document.getElementById('heartsContainer');
                const heartSymbols = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’', 'ğŸ’˜', 'ğŸ’™', 'ğŸ’œ', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š'];
                setInterval(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.animationDelay = Math.random() * 2 + 's';
                    heart.style.animationDuration = (Math.random() * 3 + 5) + 's';
                    heart.style.fontSize = (Math.random() * 10 + 15) + 'px';
                    heartsContainer.appendChild(heart);
                    setTimeout(() => { if (heart.parentNode) heart.parentNode.removeChild(heart); }, 8000);
                }, 500);
            }

            // å…¶ä»– create å‡½æ•°ç•¥ï¼ˆä¿æŒä¸å˜ï¼‰
            function initEnvelopeInteraction() { /* åŸé€»è¾‘ */ }
            function initMusicControl() { /* åŸé€»è¾‘ */ }

            // ç®€åŒ–çš„å ä½
            ['createLoveRain', 'createRibbons', 'createBubbles', 'createStars', 'initEnvelopeInteraction', 'initMusicControl'].forEach(fn => {
                window[fn] = window[fn] || (() => {});
            });

        })();
    </script>
</body>
</html>
